@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================
   Paleta (tokens) + Base
   ========================= */
@layer base {
  :root {
    /* Light */
    --bg:        #ffffff;
    --fg:        #0b0f14;
    --panel:     #f5f7fb;
    --panel-2:   #f0f2f6;
    --card:      #f3f5f9;
    --border:    #e6eaf2;
    --muted:     #6b7280;

    /* Acento (verde estilo ChatGPT) */
    --accent:    #10b981;
    --accent-fg: #0b0f14;

    /* Form controls */
    --input:     var(--panel);
    --ring:      rgba(16,185,129,.35);
  }

  /* Dark via classe .dark no <html> */
  .dark {
    --bg:        #0b0f14;
    --fg:        #e5e7eb;
    --panel:     #0f131a;
    --panel-2:   #161a21;
    --card:      #111722;
    --border:    #1f2937;
    --muted:     #9aa4b2;

    --accent:    #10b981;
    --accent-fg: #0b0f14;

    --input:     #0f131a;
    --ring:      rgba(16,185,129,.35);
  }

  html, body, #__next { height: 100%; }
  html { color-scheme: light; }
  .dark html { color-scheme: dark; }

  body {
    @apply antialiased;
    background: var(--bg);
    color: var(--fg);
    margin: 0;
  }

  a { color: inherit; text-decoration: none; }
  *, *::before, *::after { box-sizing: border-box; }
  ::selection { background: color-mix(in oklab, var(--accent) 40%, transparent); }
  ::placeholder { color: var(--muted); }

  /* Safe areas iOS */
  .safe-bottom { padding-bottom: calc(env(safe-area-inset-bottom) + 8px); }
  .safe-top    { padding-top:    calc(env(safe-area-inset-top) + 8px); }
}

/* =========================
   Helpers de componente
   ========================= */
@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 font-medium transition;
    background: var(--accent);
    color: var(--accent-fg);
  }
  .btn:hover { filter: brightness(1.05); }

  .btn-secondary {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 border transition;
    background: transparent;
    border-color: var(--border);
    color: var(--fg);
  }
  .btn-secondary:hover { background: color-mix(in oklab, var(--panel) 80%, black 20%); }

  .panel {
    @apply rounded-xl border;
    background: var(--panel);
    border-color: var(--border);
  }

  .card {
    @apply rounded-xl border;
    background: var(--card);
    border-color: var(--border);
  }

  .input {
    @apply w-full rounded-xl px-4 py-3 outline-none border;
    background: var(--input);
    border-color: var(--border);
    color: var(--fg);
  }
  .input:focus {
    box-shadow: 0 0 0 3px var(--ring);
    border-color: color-mix(in oklab, var(--accent) 50%, var(--border));
  }

  .chip {
    @apply inline-flex items-center rounded-full px-3 py-1 text-sm border;
    border-color: var(--border);
    background: var(--panel);
    color: var(--fg);
  }

  .divider { @apply h-px w-full; background: var(--border); }

  .shadow-soft { box-shadow: 0 6px 24px rgba(0,0,0,.18), 0 2px 8px rgba(0,0,0,.12); }

  /* Util classes que vocÃª usa no TSX */
  .bg-app      { background: var(--bg); color: var(--fg); }
  .bg-panel    { background: var(--panel); }
  .bg-panel-2  { background: var(--panel-2); }
  .text-muted  { color: var(--muted); }
  .border-base { border-color: var(--border); }
  .ring-border { --tw-ring-color: var(--border) }
  .btn-accent  { background: var(--accent); color: var(--accent-fg); }
}

/* =========================
   NProgress (barra de rota)
   ========================= */
#nprogress { pointer-events: none; }
#nprogress .bar {
  background: var(--accent);
  position: fixed;
  z-index: 1031;
  top: 0; left: 0;
  width: 100%; height: 2px;
}
#nprogress .peg {
  display: block; position: absolute; right: 0;
  width: 100px; height: 100%;
  box-shadow: 0 0 10px var(--accent), 0 0 5px var(--accent);
  opacity: 1; transform: rotate(3deg) translate(0,-4px);
}
#nprogress .spinner { display: none; }